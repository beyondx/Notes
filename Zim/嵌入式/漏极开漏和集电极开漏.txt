Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2012-08-14T17:05:48+08:00

====== 漏极开漏和集电极开漏 ======
Created Tuesday 14 August 2012
http://blog.csdn.net/jamestaosh/article/details/4371400

推挽输出与开漏输出的区别：

	推挽输出: 可以输出高,低电平,连接数字器件;是两个参数相同的三极管或MOSFET,以推挽方式存在于电路中,各负责正负半周的波形放大任务。电路工作时，两只对称的功率开关管每次只有一个导通，所以导通损耗小,效率高。输出既可以向负载灌电流，也可以从负载抽取电流。
	
	开漏输出: 输出端相当于三极管的集电极. 要得到高电平状态需要上拉电阻才行. 适合于做**电流型的驱动**,其吸收电流的能力相对强(一般20ma以内).

	**推挽结构一般是指两个三极管分别受两互补信号的控制,总是在一个三极管导通的时候另一个截止.**

开漏电路特点及应用  

     在电路设计时我们常常遇到开漏（open drain）和开集（open collector）的概念。所谓开漏电路概念中提到的“漏”就是指MOSFET的漏极。同理，开集电路中的“集”就是指三极管的集电极。开漏电路就是指以MOSFET的漏极为输出的电路。一般的用法是会在漏极外部的电路添加__上拉电阻__。完整的开漏电路应该由开漏器件和开漏上拉电阻组成。如图1所示：   
{{./1.jpg}}

			图1
 
组成开漏形式的电路有以下几个特点：
1. 利用外部电路的驱动能力，减少IC内部的驱动（或驱动比芯片电源电压高的负载）。当IC内部MOSFET导通时，驱动电流是从外部的VCC流经R pull-up ，MOSFET到GND。IC内部仅需很下的栅极驱动电流。如图1。

2. 可以将多个开漏输出的Pin，连接到一条线上。形成 “__与逻辑”__ 关系。如图1，当PIN_A、PIN_B、PIN_C任意一个变低后，开漏线上的逻辑就为0了。这也是 __I2C__，SMBus等总线判断__总线占用状态__的原理。如果作为输出必须接上拉电阻。接容性负载时，下降延是芯片内的晶体管，是有源驱动，速度较快；上升延是无源的外接电阻，速度慢。如果要求速度高电阻选择要小，功耗会大。所以负载电阻的选择要兼顾功耗和速度。

3. 可以利用改变上拉电源的电压，__改变传输电平__。如图2, __IC的逻辑电平由电源Vcc1决定，而输出高电平则由Vcc2__（上拉电阻的电源电压）决定。这样我们就可以用低电平逻辑控制输出高电平逻辑了（这样你就可以进行任意电平的转换）。（例如加上上拉电阻就可以提供TTL/CMOS电平输出等。）
{{./2.jpg}}
	

					图2

4. 开漏Pin不连接外部的上拉电阻，则__只能输出低电平__(因此对于经典的51单片机的P0口而言，要想做输入输出功能必须加外部上拉电阻，否则无法输出高电平逻辑)。一般来说，开漏是用来连接不同电平的器件，匹配电平用的。

5. 标准的开漏脚一般只有输出的能力。添加其它的判断电路，才能具备双向输入、输出的能力。

6.正常的CMOS输出级是上、下两个管子，把上面的管子去掉就是OPEN-DRAIN了。这种输出的主要目的有两个：__电平转换、线与__。

7.线与功能主要用于有多个电路对同一信号进行拉低操作的场合，如果本电路不想拉低，就输出高电平，因为OPEN-DRAIN上面的管子被拿掉，高电平是靠外接的上拉电阻实现的。（__而正常的CMOS输出级，如果出现一个输出为高另外一个为低时，等于电源短路__。）

8.OPEN-DRAIN提供了灵活的输出方式，但是也有其弱点，就是带来__上升沿的延时__。因为上升沿是通过外接上拉无源电阻对负载充电，所以当电阻选择小时延时就小，但功耗大；反之延时大功耗小。所以如果对延时有要求，则建议用下降沿输出。


应用中需注意：
1.   开漏和开集的原理类似，在许多应用中我们利用开集电路代替开漏电路。例如，某输入Pin要求由开漏电路驱动。则我们常见的驱动方式是利用一个三极管组成开集电路来驱动它，即方便又节省成本。如图3。
	
2.  上拉电阻R pull-up的阻值决定了逻辑电平转换的沿的速度。阻值越大，速度越低功耗越小。反之亦然。


一.什么是OC、OD

集电极开路门(集电极开路 OC 或源极开路OD)
open-drain是漏极开路输出的意思，相当于集电极开路(open-collector)输出，即ttl中的集电极开路（oc）输出。一般用于线或、线与，也有的用于电流驱动。
open-drain是对mos管而言，open-collector是对双极型管而言，在用法上没啥区别。


二.什么是线或逻辑与线与逻辑？

	线与逻辑，即两个输出端（包括两个以上）直接互连就可以实现“AND”的逻辑功能。在总线传输等实际应用中需要多个门的输出端并联连接使用，而一般TTL门输出端并不能直接并接使用，否则__这些门的输出管之间由于低阻抗形成很大的短路电流（灌电流）__，而烧坏器件。在硬件上，可用OC门或三态门（ST门）来实现。用OC门实现线与，应同时在输出端口应加一个上拉电阻。

	三态门（ST门）主要用在应用于__多个门输出共享数据总线__，为避免多个门输出同时占用数据总线，这些门的使能信号（EN）中只允许有一个为有效电平（如高电平），由于三态门的输出是推拉式的低阻输出，且不需接上拉（负载）电阻，所以开关速度比 OC门快，常用三态门作为输出缓冲器。

	在一个结点(线)上, 连接一个上拉电阻到电源 VCC 或 VDD 和 n 个 NPN 或 NMOS 晶体管的集电极 C 或漏极 D, 这些晶体管的发射极 E 或源极 S 都接到地线上, 只要有一个晶体管饱和, 这个结点(线)就被拉到地线电平上. 

	因为这些晶体管的基极注入电流(NPN)或栅极加上高电平(NMOS), 晶体管就会饱和, 所以这些基极或栅极对这个结点(线)的关系是或非 NOR 逻辑. 如果这个结点后面加一个反相器, 就是或 OR 逻辑.

	这些晶体管常常是一些逻辑电路的集电极开路 OC 或源极开路 OD 输出端. 这种逻辑通常称为线与/线或逻辑, 当你看到一些芯片的 OC 或 OD 输出端连在一起, 而有一个上拉电阻时, 这就是线或/线与了, 但__有时上拉电阻做在芯片的输入端内__. 顺便提示如果不是 OC 或 OD 芯片的输出端是不可以连在一起的, 总线 BUS 上的双向输出端连在一起是有管理的, 同时只能有一个作输出, 而其他是高阻态只能输入.
